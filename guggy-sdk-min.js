!function(){!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(n):t[e]=n()}("reqwest",this,function(){function succeed(e){var t=protocolRe.exec(e.url);return t=t&&t[1]||context.location.protocol,httpsRe.test(t)?twoHundo.test(e.request.status):!!e.request.response}function handleReadyState(e,t,n){return function(){return e._aborted?n(e.request):e._timedOut?n(e.request,"Request is aborted: timeout"):void(e.request&&4==e.request[readyState]&&(e.request.onreadystatechange=noop,succeed(e)?t(e.request):n(e.request)))}}function setHeaders(e,t){var n,s=t.headers||{};s.Accept=s.Accept||defaultHeaders.accept[t.type]||defaultHeaders.accept["*"];var r="undefined"!=typeof FormData&&t.data instanceof FormData;!t.crossOrigin&&!s[requestedWith]&&(s[requestedWith]=defaultHeaders.requestedWith),!s[contentType]&&!r&&(s[contentType]=t.contentType||defaultHeaders.contentType);for(n in s)s.hasOwnProperty(n)&&"setRequestHeader"in e&&e.setRequestHeader(n,s[n])}function setCredentials(e,t){void 0!==t.withCredentials&&void 0!==e.withCredentials&&(e.withCredentials=!!t.withCredentials)}function generalCallback(e){lastValue=e}function urlappend(e,t){return e+(/\?/.test(e)?"&":"?")+t}function handleJsonp(e,t,n,s){var r=uniqid++,i=e.jsonpCallback||"callback",o=e.jsonpCallbackName||reqwest.getcallbackPrefix(r),a=RegExp("((^|\\?|&)"+i+")=([^&]+)"),l=s.match(a),u=doc.createElement("script"),c=0,p=-1!==navigator.userAgent.indexOf("MSIE 10.0");return l?"?"===l[3]?s=s.replace(a,"$1="+o):o=l[3]:s=urlappend(s,i+"="+o),context[o]=generalCallback,u.type="text/javascript",u.src=s,u.async=!0,void 0!==u.onreadystatechange&&!p&&(u.htmlFor=u.id="_reqwest_"+r),u.onload=u.onreadystatechange=function(){return u[readyState]&&"complete"!==u[readyState]&&"loaded"!==u[readyState]||c?!1:(u.onload=u.onreadystatechange=null,u.onclick&&u.onclick(),t(lastValue),lastValue=void 0,head.removeChild(u),c=1,void 0)},head.appendChild(u),{abort:function(){u.onload=u.onreadystatechange=null,n({},"Request is aborted: timeout",{}),lastValue=void 0,head.removeChild(u),c=1}}}function getRequest(e,t){var n,s=this.o,r=(s.method||"GET").toUpperCase(),i="string"==typeof s?s:s.url,o=s.processData!==!1&&s.data&&"string"!=typeof s.data?reqwest.toQueryString(s.data):s.data||null,a=!1;return("jsonp"==s.type||"GET"==r)&&o&&(i=urlappend(i,o),o=null),"jsonp"==s.type?handleJsonp(s,e,t,i):(n=s.xhr&&s.xhr(s)||xhr(s),n.open(r,i,s.async===!1?!1:!0),setHeaders(n,s),setCredentials(n,s),context[xDomainRequest]&&n instanceof context[xDomainRequest]?(n.onload=e,n.onerror=t,n.onprogress=function(){},a=!0):n.onreadystatechange=handleReadyState(this,e,t),s.before&&s.before(n),a?setTimeout(function(){n.send(o)},200):n.send(o),n)}function Reqwest(e,t){this.o=e,this.fn=t,init.apply(this,arguments)}function setType(e){return null===e?void 0:e.match("json")?"json":e.match("javascript")?"js":e.match("text")?"html":e.match("xml")?"xml":void 0}function init(o,fn){function complete(e){for(o.timeout&&clearTimeout(self.timeout),self.timeout=null;self._completeHandlers.length>0;)self._completeHandlers.shift()(e)}function success(resp){var type=o.type||resp&&setType(resp.getResponseHeader("Content-Type"));resp="jsonp"!==type?self.request:resp;var filteredResponse=globalSetupOptions.dataFilter(resp.responseText,type),r=filteredResponse;try{resp.responseText=r}catch(e){}if(r)switch(type){case"json":try{resp=context.JSON?context.JSON.parse(r):eval("("+r+")")}catch(err){return error(resp,"Could not parse JSON in response",err)}break;case"js":resp=eval(r);break;case"html":resp=r;break;case"xml":resp=resp.responseXML&&resp.responseXML.parseError&&resp.responseXML.parseError.errorCode&&resp.responseXML.parseError.reason?null:resp.responseXML}for(self._responseArgs.resp=resp,self._fulfilled=!0,fn(resp),self._successHandler(resp);self._fulfillmentHandlers.length>0;)resp=self._fulfillmentHandlers.shift()(resp);complete(resp)}function timedOut(){self._timedOut=!0,self.request.abort()}function error(e,t,n){for(e=self.request,self._responseArgs.resp=e,self._responseArgs.msg=t,self._responseArgs.t=n,self._erred=!0;self._errorHandlers.length>0;)self._errorHandlers.shift()(e,t,n);complete(e)}this.url="string"==typeof o?o:o.url,this.timeout=null,this._fulfilled=!1,this._successHandler=function(){},this._fulfillmentHandlers=[],this._errorHandlers=[],this._completeHandlers=[],this._erred=!1,this._responseArgs={};var self=this;fn=fn||function(){},o.timeout&&(this.timeout=setTimeout(function(){timedOut()},o.timeout)),o.success&&(this._successHandler=function(){o.success.apply(o,arguments)}),o.error&&this._errorHandlers.push(function(){o.error.apply(o,arguments)}),o.complete&&this._completeHandlers.push(function(){o.complete.apply(o,arguments)}),this.request=getRequest.call(this,success,error)}function reqwest(e,t){return new Reqwest(e,t)}function normalize(e){return e?e.replace(/\r?\n/g,"\r\n"):""}function serial(e,t){var n,s,r,i,o=e.name,a=e.tagName.toLowerCase(),l=function(e){e&&!e.disabled&&t(o,normalize(e.attributes.value&&e.attributes.value.specified?e.value:e.text))};if(!e.disabled&&o)switch(a){case"input":/reset|button|image|file/i.test(e.type)||(n=/checkbox/i.test(e.type),s=/radio/i.test(e.type),r=e.value,(!n&&!s||e.checked)&&t(o,normalize(n&&""===r?"on":r)));break;case"textarea":t(o,normalize(e.value));break;case"select":if("select-one"===e.type.toLowerCase())l(e.selectedIndex<0?null:e.options[e.selectedIndex]);else for(i=0;e.length&&i<e.length;i++)e.options[i].selected&&l(e.options[i])}}function eachFormElement(){var e,t,n=this,s=function(e,t){var s,r,i;for(s=0;s<t.length;s++)for(i=e[byTag](t[s]),r=0;r<i.length;r++)serial(i[r],n)};for(t=0;t<arguments.length;t++)e=arguments[t],/input|select|textarea/i.test(e.tagName)&&serial(e,n),s(e,["input","select","textarea"])}function serializeQueryString(){return reqwest.toQueryString(reqwest.serializeArray.apply(null,arguments))}function serializeHash(){var e={};return eachFormElement.apply(function(t,n){t in e?(e[t]&&!isArray(e[t])&&(e[t]=[e[t]]),e[t].push(n)):e[t]=n},arguments),e}function buildParams(e,t,n,s){var r,i,o,a=/\[\]$/;if(isArray(t))for(i=0;t&&i<t.length;i++)o=t[i],n||a.test(e)?s(e,o):buildParams(e+"["+("object"==typeof o?i:"")+"]",o,n,s);else if(t&&""+t=="[object Object]")for(r in t)buildParams(e+"["+r+"]",t[r],n,s);else s(e,t)}var context=this;if("window"in context)var doc=document,byTag="getElementsByTagName",head=doc[byTag]("head")[0];else{var XHR2;try{XHR2=require("xhr2")}catch(ex){throw Error("Peer dependency `xhr2` required! Please npm install xhr2")}}var httpsRe=/^http/,protocolRe=/(^\w+):\/\//,twoHundo=/^(20\d|1223)$/,readyState="readyState",contentType="Content-Type",requestedWith="X-Requested-With",uniqid=0,callbackPrefix="reqwest_"+ +new Date,lastValue,xmlHttpRequest="XMLHttpRequest",xDomainRequest="XDomainRequest",noop=function(){},isArray="function"==typeof Array.isArray?Array.isArray:function(e){return e instanceof Array},defaultHeaders={contentType:"application/x-www-form-urlencoded",requestedWith:xmlHttpRequest,accept:{"*":"text/javascript, text/html, application/xml, text/xml, */*",xml:"application/xml, text/xml",html:"text/html",text:"text/plain",json:"application/json, text/javascript",js:"application/javascript, text/javascript"}},xhr=function(e){if(e.crossOrigin===!0){var t=context[xmlHttpRequest]?new XMLHttpRequest:null;if(t&&"withCredentials"in t)return t;if(context[xDomainRequest])return new XDomainRequest;throw Error("Browser does not support cross-origin requests")}return context[xmlHttpRequest]?new XMLHttpRequest:XHR2?new XHR2:new ActiveXObject("Microsoft.XMLHTTP")},globalSetupOptions={dataFilter:function(e){return e}};return Reqwest.prototype={abort:function(){this._aborted=!0,this.request.abort()},retry:function(){init.call(this,this.o,this.fn)},then:function(e,t){return e=e||function(){},t=t||function(){},this._fulfilled?this._responseArgs.resp=e(this._responseArgs.resp):this._erred?t(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):(this._fulfillmentHandlers.push(e),this._errorHandlers.push(t)),this},always:function(e){return this._fulfilled||this._erred?e(this._responseArgs.resp):this._completeHandlers.push(e),this},fail:function(e){return this._erred?e(this._responseArgs.resp,this._responseArgs.msg,this._responseArgs.t):this._errorHandlers.push(e),this},"catch":function(e){return this.fail(e)}},reqwest.serializeArray=function(){var e=[];return eachFormElement.apply(function(t,n){e.push({name:t,value:n})},arguments),e},reqwest.serialize=function(){if(0===arguments.length)return"";var e,t,n=Array.prototype.slice.call(arguments,0);return e=n.pop(),e&&e.nodeType&&n.push(e)&&(e=null),e&&(e=e.type),t="map"==e?serializeHash:"array"==e?reqwest.serializeArray:serializeQueryString,t.apply(null,n)},reqwest.toQueryString=function(e,t){var n,s,r=t||!1,i=[],o=encodeURIComponent,a=function(e,t){t="function"==typeof t?t():null==t?"":t,i[i.length]=o(e)+"="+o(t)};if(isArray(e))for(s=0;e&&s<e.length;s++)a(e[s].name,e[s].value);else for(n in e)e.hasOwnProperty(n)&&buildParams(n,e[n],r,a);return i.join("&").replace(/%20/g,"+")},reqwest.getcallbackPrefix=function(){return callbackPrefix},reqwest.compat=function(e,t){return e&&(e.type&&(e.method=e.type)&&delete e.type,e.dataType&&(e.type=e.dataType),e.jsonpCallback&&(e.jsonpCallbackName=e.jsonpCallback)&&delete e.jsonpCallback,e.jsonp&&(e.jsonpCallback=e.jsonp)),new Reqwest(e,t)},reqwest.ajaxSetup=function(e){e=e||{};for(var t in e)globalSetupOptions[t]=e[t]},reqwest});var GUGGY_IMAGE="data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAEcAAABHCAYAAABVsFofAAAABGdBTUEAALGPC/xhBQAAHo9JREFUeAHFfHmQXld157n3vuXbele35FbbkiVbthbjMULBBowsIASCzQA1djzLH6mZOEMZBmeSKVKTqSFtmJoZnIJQpJJZoEimEjKpMnaAsZ1QBLAJYBkvwlYkWZK1WKu7W71+21vuMr/zvu/r9etWa7FzVZ/eeu+77/fOOfeec363Bf3jFHGJj3WXeP9Vuf1SO3m5D23/nNW8cvua3I/V1L7c/mb1ln/0FTXbpu3WqzxMYvgy2h7+/SYYS3vcavkyWl25ytJHrXz/aq7Otdns9jAAaVXcdqC5fy/RwYMkdrcutNk+g3O4P2vlUexv3z4nLRlYs63OVr6qQC1tfvY5l7wz1xa62ALkAMAADnRwewOII+dI7MTx8UES27F9fXwOuPlP3NDXAOIATm46R+5FbLcMkmsBhvZmgWgD1Oy1+W1e6v7cC11qzbn759qYBwpLSAuQDgCSBxgMRL5MIuwhcS0N0UjVisFBorGKmWuj2W5/Sblz54iSonTXdJ1xJ08S1TvIVQAag1UGUGPbABBEqgXUIpCuGKAlnZp751XtNeq3AeUaANIDQEoAZGsfCW96SEyoVHo1K1TJCVW3Qha6hYxt1kYZ2y48chq/jlBmL2axtbUpZ/LSmYpwPQO+PTktXTx5xjFQAzFZlqjzAIrVj0EaxjGxfZp7s8sGSXFbl1kWAMOSMjZA0tMkP9xBMjdOqlcMyT4/r0jnPZuUVJ6Ul/f4lqrfYfo9bcq+CBK/qFJPitQnL/VC/Ip+6vlGK1+kKjHdqpibljEVlYx8mTcVmfNK4vr+bjFuu+QOOUOmQGJSk7junXiTp0ncdxCbH2H/4ezN5mC6xBe9nIoLQOHnbduGzv0dSZaU2yApOW9IzsSxCpSRnuqUUZqqbpmXUW5aKZGTShsVCydlHEjhOyE0fp7L2g28xMVRSM4TLnDSOpdYGwpra7ENlTQzttPmvMhccJ7NBxUTW2Wrxrf9+ozd9wa5/u1kx9pL0SVL0KWCswAYlhZ0RrBNGQ1JdgMUSIEsxKkKdElFhUnl67zyZeApa1mpPGmsUr6nBEVS2wIATERNO+n7RMI44axwJMn5RjjnC4CTWqvzxsrUGKUAQ6qNp0xgE63rnkl938RNkDpLI6ZGZOuwSU9A1TAYOB7hLtcWXQo4bYEZI5L9J0l2BIOy1J2oEOqTqHEvqOc8XwGUDAntaWfwvgrqozxjrCcVhAiACQFxoBRwkAgo7NaeBSwq0dbUcINJSFjljIb10YBWWwe5s1qjVgqcdQqQYu3roBTqqFw2de3brvCcmYY9yox2S4ouww6tFpwlwEz2kHwP1KgAcGYqa1VppugFxUShsz5LioHweIHyFYTCijSwxgTKs751wgcgnoSNhpB4ZKQU5ACOEZ4o3S2cKEDJIFnkC7JTULYxY91ZcsnxWJhxKSA60LWcMolOvVT52CovTQCS74VpUq2YWuibCUgRPpztx29WzS4RoNWA0xaYa5tq1AXbUgiKXggs0CUfvQ0YmJjCsCB1YIlCZ00XXtjBwgaQlsABIP6RlEpIDQHxpQVKbL8gWc7gH+4GWDInSPVAwXokqfUYgSq4dtDY9JVY0XRASQywYm29BJYpkUGa+F6UxrBARVPV9aaajbYH6KI2aHXgoBme1LGNYYlhYG6Bfan6kZeUC16hGPuh8X1LMvRdGvKWpJ8LMPqSK7wbVmSDUZUntVMhLEt4oWZL/++02nGyooZmEtFVTkVnJaXO2FA+71Glw3czHb6Y6Q7d1PYec+yeDcmrAQZ9sqrDE8H1kuRgSuagUvpncRJPAs9ImCCSwsVpYJK4HqYeNK6WVPV0GJqurjPmcgC6GDiQ+IXAsCp1Tg8pBiYvC16oY19LL3ApBinKhSnFeSIvnyfvdkH+O51Mj1thj50o647HT/rveHlcvu1MVd5gHMEEr67kPFG7vmQP7VyTvnz/ZrcvJynxpb8FWnmdc/o5I6PnEiNqkKS6En6ckI09nUuilQAa5jfLSmu7pDMrgZNdGx5uSAyPSgOQ+mkA09sExtSjIFReYLXMpYLyvg+8rFgbuOCjUAGXCP3KdGLUV/YHv/KzEbEHIzYk58pKyXdTHxoyT31yq/6JwrCmnL9TCFhuSr6bmHQEz66LsFxPIx+al49bABUGxvTzTRv0JzDSj7L7cRGAlpsENkADMHfhXbZhcsejUjhNqisOVTEu+MZFQY680MlcHnajoDwq+jrchhHnE+TbY3VTP/qV/d6eP9wfPPDajNhuYYCvDJZG7cSK3MEpecuTp9XbjbVTN/UmL0BVMU0K3h9ImoydmYHFYuNFzqYUuBDWzaMZja6eq1JHjdzUZiK8l5s3UWzbteXBYXV6piE16zDr9TDj7SphVBIFX+cAjPBC309zUI+CIExqbXCLL8MPpTLae6pq9UN7859+YUzemVq6Ymlp1/O6Fh0vjqt3HJpSXbsHo58r6TC7yX1AKldJiKYkeQ6zSOdIO1/lHKZYtK4/72RSpgtTRNedgpc/N5Nuq0HtwGmok5hTp+kErsDgoOoolzztj/l5WwgwLclF2iso6Rd8KTcrF96fiPTp58Zcz++9ED40WqNr273U1T53riY2PPOGf+Pta82+vNInPMp/XCkasfDAfKudZpCSGRclrOaJK1CvW9s/4wg24nWWHggAXI62pT04kJq7UIl9pSIEdCAdUl2wcZjT8JgbYLqWC0yQp0AUPOdvVTa4PxXp9x8/aTZ++R+CT1fTzIds+8A34yRGvL4fnFW3be01Lw/k9CGo2B4hxWTqaNJ32mLO7jwTuSAuuDK2hWLNGciZx9IDkJrqtUR6FoOzQGreCXXamEB74TwW06LHdsZ5Xhham0/JFUMS6yVsjPXSvc+Nmq4v/UPwqdgIjFZvfYmMKP58VG17/3r904Jnz3gu3JOSOGFI1NlHU4GzEeWsXwpczs+7Y1Cvrg14CQSMHoV6tZOebOK14FWaAxuPThyDYSeSfaXMJbA+zIzCxE6GQqqCpNxHSOrDpyvG/LdXwn/7jwVMq/+TiVj3H18I/o2Vtm4pPVAg724fnYwpDXli2q2mvCBJ1EwtUd0eXB74hIRI3DA30HjvBdIzX3IWSM1ZSA2HHagETcboVAgpAOaBlAmsWlj0yH+XFKKvTsmrDz2b+9Ro/a2xMS0glttOxmLg6IzI3TUUPQu/fggz7hzcsbMewSVj5fK0VbLD9pfyNpOeKrmnID0H7wU8Dy9sdSE482zNdYjJcDymO409lav6uRhG2PNzqZMFOD39vszdrVW89yuveHteuCDfu7DZ1R91hoq29efobQM5unVtjjb3hLSu5FGMYbCSwPm4jHK6Kq/fUKJXN3WaQ/iId0onDhkJXHxtIPSwAsZWbOzWddUs257BCN47j1xPZw+blZ6Fc4+HSXDM98HtREOIy9RCBBlcpyzomqoDGa1FAI8xVKJwBzzj05PaBT86733oUvuPKQh94PoS3X1jRwbMcvUn6oa+d6xMj706Q1ORWe62dufFnx3xP757Xf3LkJyTROo98OWegGolnjNpzTeeLzrN+LlA5gfP2X6YDzTiMtWahQa1mi1np4bvwqRvjATPa0prMf1EBE9Hwleeh/mVCwOMkx7ZHumCX01F/PwjL3sfOTojt7Xr3XLndl6Tp/+6Zx19+IYO6odyrlTyMBi3QKL+6U2dlMNXeWUUn7hpE1eqx9d4BCsqd2pzp3kV86/bHdX3e05F8HU1fFSDeIHp9VNrylX3QnPes9gwzxnk5kM5KM6GePzcoFT1buEhgseBKsRPEGkxgSfC2yTZU2crovTTN9RdF+tk6zpLy2/c1kNffP86GupctVuVVYeo0r/Y0UV/gLp5b96nbTW+zPZbJ/2P+ogoIoJ2KhCd/yTypA+L43smVFE6qaakkWMwzJwN4TKc/Z/9lz1kDpzmhd3YcpbA70R8RcGlNNOY5/kqQsCB4zFSeFtTkZz569fVzkvxlf7DHf10//buuccv2vMHt1Dnnl+n7rt/i4o778YwWVp0B9HbYJO++P5rMNlaHUBjkRj66QhtSGVyGhK3jWNLUtY9GeBji4KEasmgOpgJAwtF9sB5kjkHDuwNhyQ4r8TpE84SeEJLVcrJNDFZBA+O3BrEpHKoP/2LCXXrkt4vc+LBd/TRBzctfdnW7V2//JvU/+t/SB3vuo+Kt36Quj/0IA088MfkDVyf3SJLPZiKNizAtv6QPrWrr1X1otsfnlVvd8JOwTlFbCgc4Giksj6HIRHDtpkQsDCwUCwus+AMN6+wiG3cCGOE9ElNTkuokORIpxIGUTu1SSgzeiFypdMVcUOzyoqbHbAZn7i5c9l7Cm/7AJV+6WNwHRdKg9fZTz33/DZA8WjtJ79Gffd/frYNNuQsRaspBybVjkaAzY4iJL1BWsSvvTp8xJzkj89CwMLAQsHCgeF8tiOz4GQPwoTo+GQjx8R5pc5kLUJMDkLMcSR4LEIOIsA79t1TcgdG2pWtKRrk9/13bb6yCOGUNEsBksLlyJEjNIgM32c/+9nmFaJg3Wby+6+jib/+7xQM3kz57XfNXnvgtt7Z/ZV2RiOx/khF9ZFKXkP/hVYIPNuiQuRMitx0lkNjYWhjd7IXnEWKc9f3YhgfOWdFT0+3qEczMg/d1BAeqyLl28IAwgCnTpT9VTmVvzRYwLwlyPquIAlsU3I3vhNTjQKZ2gxFR58j1b02u75hwwaK45ieeuopeuSRR2bfVxa7KT7+EtUP/TiTJD6uvvAEbV1DtL7Dp7PldPbeZXbEiyPyui0d+u/JVhGDhuQIDFqxlFW7Fso6Ic6nQ+LM5JlZHFrtNCSnaYRaescpWtZHkTbySZw+gb6iIdEJvOszq3Qsdw023CxvzXU08Jv/gwo79mTA8MNVoRP25Zex5Twn0UsvvUS7d++mr371q9kx/4fYM6Xnj/IOxBAheQSNOu/8l3TNv/+/lLv53bR7w5wEzlZqs3MhEd3I8ShkLjDuOVlNixzREAiKQTO6kZpGgVCwKzGv4ImLChsnzl1zeraIZ3MuifNKnoW3T4geudRxzHdRtbaH78CcBi1Q373/eRaUxx9/nD73uc9RuVzO6givIVl33HEH8bX3ve99s21VX3wSSagyBRtvpdwNu7LzyNDgy6HbGH62rlldqGgiEhgmpURmR2gD5wcpRWFCkQ0RsPWcs2dsWHMaD2l0YVm70YUPWouckMhI8qwEgRGE1ISxGEg5GN6ovvz/HZg28nwmWH8Teb3rZ2+cmZmhL3zhC7RmzRr6zGc+k53nkJTTMcfkG8eQGAZm+vv/m/y1m6jvE79HMo/kuE6p+tJTVH7mz7P7Vjtfmk5kJwse5BU5EARXkC4zeC8LzZidBs/2cG5nWXBat4QUw2XzhOA0SvbZCH4PXXSo6Mo1ht7WcNxq78knn6QiRHK+hPBINfqNh0h1IriC/XT0BDJy4xRcdwv1fux3M2BsXKX64WcBzF+0mqISPsBqCiQfKVMAYbSAO40qafYCNezNQEOWa2N5cJjuAKlF/omktS4IkZZOwwD8Bwcfogo7uOJwgYlR9kxbGV/w7G9+85tkDOdg5sI+TidkpkZJXzid3Ss7+qjjvf+KeJgXuSKlY69T+dlvwQH4Ia43DST2Ej23v+Ahiw4QlK8oHm/hKSJ7A5Ski5r3dILJMckotSnLgsP0D+QcXaghiHCsEHFM8J18ZGcd55VG68sCnj2mhuAxl/j0wcxusFpwCYKGjckOmv9FR3+eqVVu23upGxNCG9fxgQHKyHGq/ehPs9GKbc/iMg7HdDWlO6RpmAWnJQyo9RDh9ShEYhm5V1ddoYEl4DCjqgcJjxjOWCHJkvnOT4E3qRjRLcfZW064rdBmdok96jJCDh1UoekffoN6PvJQ2ypm5gJNfe9PsmtIf1F0Yh9Fh/dmqmUmz7Wt0zp5ZCJu7a647Q3cNIu/Is/G7EEzewNxBv74kxDstSBIPYsWwBZxMMo8hmSlobTNg2ca54gZVSw5YDm4uo4ztgNMGGIhbipHoohM5GTz1mU3+DD07JmGvNZ+8T0af/TzpKdHZ+9nI1w78DSN/Z/fwfQDXwKl9srf0dR3vwRwfkoXA4bv33u2zpuLlrUFN4HAHIuNgXoZ56oW2QsE3jtdVzjlWJmZLcYssXkFifyGEmfwYPrsDuDE0FCDUVVGpL4oaxkNBPkpgwT+MWeUhxTt8afPXdwY/vj16qxPFR3ZS/zjkUv4IempEXIwspdbRqqaXjq/jLGY1ygmNmb3OndCan8DyWCHtuXHHWLJoUV2Pao6w7S6whk33qYrS95wE7LbzMFjqlm+NGItcrkZPwZWNDb1nxsRn+LcNado5/Wh7e7z5+t0bBJZpHlFT5zNbMmlAMO25TuHF2ryn78yRRDOi5ahojvWm3MVjOL9CFCdRewFQg3OTz6200jmM53u5Ekips+x4Azj1yqz4Aw3z/BNfDNXmo66HPI/lolD3CjTPzBdSEGNiJG7frVZZdkNhk/68t4Lqw5QtWtoGvOG//SjEfqj58fpt79/np44Wqa/2D9Ff4sI4WrKLb12PzqQwG1YZ1x8IsZHRhDZsI4hYWN1QWb8QmaqZlTe358bDmfBYZIhEw75JiYjcqWsMjcERpVlAhHJFO+bQGvjnWvMy6vp3OHxmB4/zPOCSy8vQvI+/Tfn6LWm4X1lJKKvPHeB/uzli5q81sPcPRv1Ps/KbuWoivjTBcQ2tcHHzoEdhvmbTWeU40GoZW9bFXm7ZLTK6KsHyfVO+zYCA68YrDHOVrQA+QVxY0gO/HSM0PdtSvZ9+3X18UrKU/OVy/96cYIKCHNyaHRxYen62r5JJNdy1BkIqmPuchyqyMb80IXVjUaL22wdX99hD24qmVHwELeCWXYQEQWMuwXtu0SbGXhuxSnX13fBjsMYb5vMhGN2pOI2WuAwNVVkCgfFY7vz2uAZNzDab3MWBhnRLuFLzYwqBUoaghcRUp3lX1mv/+axk/4/b3VmuS3bhi9BvTAbpV/bDr9kXtk/FtO3Dk1nv3mnr3gXI4x9YFv6bcn+pvOG6q76hBJMWzVpXcSmHOWtA9lSjTc4zY9CGB9llRrOHp1Zszm1wjkmFrJqMZeujkrM+02CAKRXiZFKa6aawasFERRhd2eiB7cmP+nLufOrfZOv7Zug3/3BG/QqVI1LiqDQNyA1b0bZ3mOf39VnXg9kcBPwOQhK2UzOjxKwwrSOukzeq5he0C+Tpkpl9mZRR1qSs+B0S7WYEN3rz9hSIdYu6krh96VCpvAQA6QBqObg2n58Q/qdrx8OPrmggRUO2I7w7xrkphicC6uc5a7Q5JJL0ODkwe3xd31M6CEdG7Stfz0GjwByk6auppHJMDOxsmfKZ1wHknrtVIobnS85rFoNqYJqYXLqmNvLPN+03meYtcnkRIRNY6AfaWPqCs7zr91gXtzZb3+8pIcXOXG+ot8UYPBYd98m/VdbOsU5RcEuS3qvkXoyJD9GwAJ54W7N2sCs04GNDcYpa0tGx230eXaCMB+cxqWmajFlfh9EjgnQzPMNQGdl1iYom0kAmwM+UF2p3A0+qeJ/2ZX81bUld+QieLwll9+zzvzgN7aYnwQiHAJOcAnjvdxfhDGRJU/TpJhklNwyknnMV2amadaxbBq8sItLwWnexLPl+dIzBjI001mVYYqrH6cp1YWI9ysbvitH/jWP3J58rTtwYwubf2uPNnfY/Z/fmT4GUPIgV96i/fp3UtL1FKR4kJXB5Iw0U3EzqYHBZtu6aOI3KzXc80bQZeE7COarcO640kFiA9yenr4q2ZxPpg5Op5cI3/qIWMYCxgcTQncaRMmPFmVy+OY++/JzI2or6CDL52EWPuuqHW0CMH9we/T1IijOHgXvxgDyJBl7AnmTugR/OzY6Ma4rLYLBeLb8hpU1smdPkUMI0D3No9TDS7uyVHL4nqb0MD2e0YWfABEEsU3XtF8LUqazShtEQRrUIU1nwBh9TFL+3Ts6xYX/eWf9i5s7Lbtob1VxUKXvf/3O6I97MVlVLvigdfqHWsSHEPGpC0MRpnpgnwYpm4fjMBNji21N430XSA13vp3k8PlMenj1CZN7jmBFytawTLWwE4SOPIUGjqNLCBx+MJs8SlI3CfeiBvrr+3K+OPfRa+OfHJmROVBqr+e2uME3o/CodP9m/Ze/tSP5W89gMY0s/Koh/ZeJjQ/4Kq1JFUagtCcI0iUR4gvlaggK/FnbVWiw2sFco6f3LN+zlTqOKQ1Gr0aSS96NpBekSPWCyt+p834uH/mmokKsbkHcERQ4awuhUlvBifkwgvAHI5We/ftz6sY/Pep/DAnALct34dKvoNOW5zE8XN/ULc4jSz0knL8DH+wJGGAQB8DPJlBufRd5Ziqpe/1pBYz2QjyieU0EcnN2doRqILBEarhXK4PDdwwjl9WgpQhYW7kLv9pov8eUfuPVg1zsBWDthC7uyIOQmPcDHwupgo8hGA+pTF9KEMx87Hhw67dOqns4d81NXkFx7BI8sDX9zq415mTAyyhcsAuRGetk/dtg34wIFUcJVL4BTB7A6AyYiQsjpiMgw6tp8HybDd1zb98WnOXUqtX/jGl5330N9eqHGHKQc1r3IoFYpxBrOBLm+cLtxbIW5xOHuGRkvPSgQtoVKncnaLjipt708D/bZJ+5scvsx/VKLXX5KqiyaGque60nLtqiEY2ww2vvWWef/p1b02/+6y3xD9bn1STIU1uwZuI2rJnYl6roCeP0BFmvDlZ7ZHU1rkuok5fPgOGlRke7cRUONVhcbmChOrUFhrtx0c5l96A6qxfnkucz2XlRSK6jQ+U1D/RhtijEunwIFwyLQUAnlGEPEtPvwtoHcBjMGQTfTsFYIuEsgiPTtOalMXnthUj0TMayazp1XTUkBToCUelEjBpuydRAwU3edY05vibQFSx6TDzkJ8AN2oRQ+SC+wkFS9Z9FZCZSTC06ITFMvIl5cQgGjTgNdaWzquevnmHmOrsJw8PNuQ3G/EXfYsHhasDhCrP2Zz5AyPI1lhMprJqpxF5aSLBkBjjxciKFFTNS8gqZ0A9dSSSFt+Or3oymuhH1OIWw5aQR8I1lOo2ALlYPQQCbBVN1hFzwnxWFUHrdxopeADJkMSfFjQdSE/0Ci7CmIadJzvMQq2nMY7AQI0mNryOMqtmyIqgSj0z9UKM2y4pWBKbx0q0erbxtdHyRBLEN6j9J8qaNg7I6HmG9VUkF1cBL3RSY/mCegiiEBULg9SgfTFOkdaSvJC8RUjciDbYOtKJ+NNwLg4GWkE3F4g4w0UNIBcIvuBcJG9iuUSv0WQTdToBwdsFwwA0SgjRLClJVUuGFaSJJA9Wbxpif8nBdmQrMRRakXRSYSwFn7t5FADFdtQuprda6TlYzprPG8PLgEXtejEWH4NYzo4qJQ8yPwfooYAThaOauISEB8mKhTguhL6LUgruHYaaeBcN5PR6ikBzBywJViMdw2IG9a/b32FeawJpPnoOxtLC7MwWfkFcOL7OUcVXAzL3wylIz/+oCCeILrcWvvNQIuQVwexvLGTPWFEDC0h64YNN4W3AtwahKQRzidZ5gfkOzQG3BQljB64ARt2w9yMe0Ozap44ytc7ksTAu6EfDAOk+J8AkQ57ADVgYixuTZ1vLFcnIum+AtUCNudJU2pvX81na2Q60Tq9w26g2TGEaFlh1iKWoshCW5sWtQMBmaQWKSEHPwmGrGjCpeIcykKOb+ZGwHJPVjJCM5UcuZSE4kOhVj2oakIgf4EQznmG8OgBjwrycQKeB4DGiPSLH4tg9OZA12hR1JntG3sS9odWXjyzcsLhcbyhffP/84G+ZbfhgTnQfvIddVJffGMaIJVc54vhNjeSzwRQoWkTImR1fKeDGsoa/RjNG6R0MKEP3Ask2EYFP8eBv4Oq0iouZ0KfVLEyklJayHzaUJhqaos6aBh67VAju5bsRMJ2UrkYiYxDDNvtILAwAHQ/Vq5jHzX6bd/uVKTqutufpNKWIe8733EvWDzsGSxMzUgGktYG0yOTEjYs77qwTT4Mf0gAayuPBfIuBzrb9GwAF/jtxppI00opQcwZsvKexdZ8M0O5FzvVq1fVn8fD6ea6bd1dWfa7TDXcF8aBibDCRseV7U+uMeDBTzf5iDt3Ej/swC/oQDE4eYH4PNgsJ/w4JPxAADhHEHChPN/zsWz+CYwyrsBvB9iySFT10RMNzAkk7xycssc23NA4nbYpvEW7xIxtpsgcXnWn8NhffnF2hpI0WLLefS5v8FlJaU8P0ZKLyz8Ol85orLXJNX3NSCBubaXQQU39UCK6sBFZxlVM1rgqWidTgfDD43zP8tVB8+M3s/H1yNMvcSV6O1pW0sbH9e95ve/tIai84M8zEDwWVha9kp/Dev1dapq7Nt/7ir0/biVq7Ws940MN6sDi9ud7XHFwPsLQOiXYf/P45ume/KIHIXAAAAAElFTkSuQmCC",TEXT2GIF_URL="https://guggy-gif2text-server.herokuapp.com/guggify",Utils={getEl:function(e){var t=null;return t=e.target?3===e.target.nodeType?e.target.parentNode:e.target:e.srcElement},getRect:function(e){var t=0,n=0,s=e.getBoundingClientRect();if(e.offsetParent){do t+=e.offsetLeft,n+=e.offsetTop;while(e=e.offsetParent)}else t=0,n=0;return{left:t,top:n,width:s.width,height:s.height}},hideElement:function(e){e.style.display="none"},showElement:function(e){e.style.display=""},applyStyle:function(e,t){for(var n in t)t.hasOwnProperty(n)&&(e.style[n]=t[n])},VerticalOrientation:{TOP:"TOP",MIDDLE:"MIDDLE",BOTTOM:"BOTTOM"},HorizontalOrientation:{RIGHT:"RIGHT",CENTER:"CENTER",LEFT:"LEFT"},positionElementToAnchor:function(e,t,n,s){var r,i,o=this.getRect(e),a=this.getRect(t),l=4;switch(s){case this.HorizontalOrientation.LEFT:r=a.left-o.width-l;break;case this.HorizontalOrientation.CENTER:r=a.left+t.width/2-o.width/2;break;case this.HorizontalOrientation.RIGHT:r=a.left+a.width+l}switch(n){case this.VerticalOrientation.TOP:i=a.top-a.height-o.height/2-l;break;case this.VerticalOrientation.MIDDLE:i=a.top+a.height/2-o.height/2;break;case this.VerticalOrientation.BOTTOM:i=a.top+a.height+l}var u=self.innerWidth,c=u-o.width-l;return r=Math.min(r,c),r=Math.max(r,l),{x:r,y:i}},post:function(e,t,n,s){reqwest({url:e,data:JSON.stringify(t),type:"json",method:"post",headers:n,error:function(e){s(null,e)},success:s})},isDescendant:function(e,t){for(var n=t.parentNode;null!=n;){if(n===e)return!0;n=n.parentNode}return!1}},Animation={animate:function(e){var t=new Date,n=setInterval(function(){var s=new Date-t,r=e.modifier||1,i=s/e.duration*r;e.loop&&(i%=1),i>1&&(i=1);var o=e.delta(i);e.step(o),1==i&&(clearInterval(n),e.onComplete&&e.onComplete())},e.delay||10);return function(){clearInterval(n),e.step(0)}},rotate:function(e){var t=360;return this.animate({delay:10,duration:1e3,delta:function(e){return e},loop:!0,step:function(n){e.style.transform="rotate("+t*n%t+"deg)"}})}},Guggy={init:function(e){this.apiKey=e.apiKey,this.retrieveTextFunction=e.retrieveTextFunction,this.onSelectFunction=e.onSelectFunction,this.showPreview=e.showPreview,this.onSuccess=e.onSuccess,this.onStart=e.onStart,this.isInitialized=!0},createGug:function(e,t){Guggy.isInitialized?(this.onStart&&this.onStart(),Utils.post(TEXT2GIF_URL,{sentence:e,format:"gif"},{"Content-Type":"application/json",apiKey:this.apiKey},function(n,s){s?t(null,s):(this.lastResult={sentence:e,result:n},t(n))}.bind(this))):console.error("Guggy was not initialized")}},GuggyOverlay={element:document.createElement("div"),imgElement:document.createElement("img"),init:function(){Utils.applyStyle(this.element,{position:"absolute",zIndex:99999999,padding:"10px",borderRadius:"10px",backgroundColor:"#282828",display:"none"}),this.element.appendChild(this.imgElement),Utils.applyStyle(this.imgElement,{verticalAlign:"middle"}),this.imgElement.addEventListener("click",function(){Guggy.onSelectFunction&&Guggy.onSelectFunction(Guggy.lastResult.result.gif,Guggy.lastResult.result.sentence)})},setURL:function(e){this.imgElement.src="",this.imgElement.src=e.gif;var t=e.width/200;Utils.applyStyle(this.imgElement,{width:e.width/t+"px",height:e.height/t+"px"}),this.show();var n=Utils.positionElementToAnchor(this.element,GuggyButton.element,Utils.VerticalOrientation.BOTTOM,Utils.HorizontalOrientation.CENTER);Utils.applyStyle(this.element,{left:n.x+"px",top:n.y+"px"})},hide:function(){Utils.hideElement(this.element)},show:function(){Utils.showElement(this.element)}},GuggyButton={element:document.createElement("img"),init:function(){Utils.applyStyle(this.element,{cursor:"pointer"}),this.element.src=GUGGY_IMAGE,this.element.id="guggy_button",document.body.appendChild(GuggyOverlay.element),document.addEventListener("click",function(e){var t=Utils.getEl(e),n=Utils.isDescendant(GuggyOverlay.element,t)||t===GuggyOverlay.element;n||GuggyOverlay.hide()}),this.element.addEventListener("click",this.onClick.bind(this))},hide:function(){GuggyOverlay.hide(),Utils.hideElement(this.element)},show:function(){Utils.showElement(this.element)},onClick:function(){if(!this.isLoading){this.show();var e=Guggy.retrieveTextFunction();if(e&&e.trim().length>0){var t=Animation.rotate(this.element);this.isLoading=!0,Guggy.createGug(e,function(e){this.isLoading=!1,t(),e&&(Guggy.showPreview?GuggyOverlay.setURL(e):Guggy.onSuccess&&Guggy.onSuccess(e))}.bind(this))}}}};GuggyButton.init(),GuggyOverlay.init(),Guggy.GuggyButton=GuggyButton.element,Guggy.Utils=Utils,Guggy.Animation=Animation,window.Guggy=Guggy}();